/*! grunt_test-1.0.0.js 2017-12-14 */

!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("AniJS-RWWD");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=function(b){var c=["do","after","before","to"];b={rootDOMTravelScope:{},notifierCollection:{},init:function(){d._helperCollection={};var a=d._createDefaultHelper();b.registerHelper("default",a),d._helperDefaultIndex="default",b.rootDOMTravelScope=document,b.Parser=d.Parser,d._animationEndEvent=d._animationEndPrefix(),d._classNamesWhenAnim=""},setDOMRootTravelScope:function(a){var c,d=document;try{"document"===a?c=d:(c=d.querySelector(a))||(c=d)}catch(a){c=d}b.rootDOMTravelScope=c},run:function(){var a=[],c={};b.purgeAll(),b.notifierCollection={},a=d._findAniJSNodeCollection(b.rootDOMTravelScope);var e,f=a.length,g=0;for(g;g<f;g++)e=a[g],c=d._getParsedAniJSSentenceCollection(e.getAttribute("data-anijs")),d._setupElementAnim(e,c);var h=b.getNotifier("AniJSNotifier");h&&h.dispatchEvent("onRunFinished")},createAnimation:function(a,b){var c=b||"";d._setupElementAnim(c,a)},getHelper:function(a){var b=d._helperCollection;return b[a]||b.default},registerHelper:function(a,b){d._helperCollection[a]=b},purge:function(a){if(a&&""!==a&&" "!==a){var c=document.querySelectorAll(a),d=c.length,e=0;for(e;e<d;e++)b.EventSystem.purgeEventTarget(c[e])}},purgeAll:function(){b.EventSystem.purgeAll()},purgeEventTarget:function(a){b.EventSystem.purgeEventTarget(a)},setClassNamesWhenAnim:function(a){d._classNamesWhenAnim=" "+a},createNotifier:function(){return b.EventSystem.createEventTarget()},registerNotifier:function(a){var c=b.notifierCollection;return a.id&&a.value&&b.EventSystem.isEventTarget(a.value)?(c[a.id]=a.value,1):""},getNotifier:function(a){return b.notifierCollection[a]}};var d={};return d._createDefaultHelper=function(){return{removeAnim:function(a,b){a.target&&a.type&&b.nodeHelper.removeClass(a.target,b.behavior)},holdAnimClass:function(a,b){},fireOnce:function(a,b){b.eventSystem.removeEventListenerHelper(b.eventTarget,b.event.type,b.listener)},emit:function(a,c,d){var e=d[0]||null,f="";if(null!==e){e=e.split("."),e.length>1?(f=e[0],e=e[1]):(f="",e=e[0]);var g=b.getNotifier(f)||null;null!==g&&g.dispatchEvent(e)}c.hasRunned||c.run()}}},d._createParser=function(){return new Parser},d._setupElementAnim=function(a,b){var c,e,f,g,h=b.length,i=0;for(i;i<h;i++)c=b[i],f=c.after,e=c.before,g=c.behavior,f&&(c.after=d.Parser.parseDoDefinition(f)),e&&(c.before=d.Parser.parseDoDefinition(e)),g&&(c.behavior=d.Parser.parseDoDefinition(g)),d._setupElementSentenceAnim(a,c)},d._setupElementSentenceAnim=function(a,c){var e,f=d._eventHelper(c),g=d._eventTargetHelper(a,c);if(c.after&&d.Util.beArray(c.after)&&(e=c.after[0]),""!==f){var h,i=g.length,j=0;for(j;j<i;j++)if(h=g[j],b.EventSystem.isEventTarget(h)){var k=function(f){var g=d._behaviorTargetHelper(a,c,f),h=d._behaviorHelper(c),i=d._beforeHelper(a,c),j=d._afterHelper(a,c);""!==d._classNamesWhenAnim&&(d.Util.beArray(h)||(h+=d._classNamesWhenAnim));var l={behaviorTargetList:g,nodeHelper:d.NodeHelper,animationEndEvent:d._animationEndEvent,behavior:h,after:j,eventSystem:b.EventSystem,eventTarget:f.currentTarget,afterFunctionName:e,dataAniJSOwner:a,listener:k,event:f,before:i};new b.AnimationContext(l).runAll(l)};b.EventSystem.addEventListenerHelper(h,f,k,!1),b.EventSystem.registerEventHandle(h,f,k)}}},d._eventHelper=function(a){var b=a.event||"";return"animationend"===b?b=d._animationEndPrefix():"transitionend"===b&&(b=d._transitionEndPrefix()),b},d._eventTargetHelper=function(c,e){var f,g=c,h=[g],i=b.rootDOMTravelScope;if(e.eventTarget)if(f=d._notifierHelper(e.eventTarget),f.length>0)h=f;else if("document"===e.eventTarget)h=[document];else if("window"===e.eventTarget)h=[a];else if(e.eventTarget.split)try{h=i.querySelectorAll(e.eventTarget)}catch(a){console.log("Ugly Selector Here"),h=[]}return h},d._behaviorTargetHelper=function(a,c,e){var f=a,g=[f],h=b.rootDOMTravelScope,i=c.behaviorTarget;if(i)if(d.Util.beArray(i)){var j=this._actionHelper(a,c,i);j&&d.Util.isFunction(j[0])&&(g=j[0](e,{dataAniJSOwner:a},d._paramsHelper(j)))}else if("target"===i&&e.currentTarget)g=[e.currentTarget];else{i=i.split("$").join(",");try{g=h.querySelectorAll(i)}catch(a){g=[]}}return g},d._behaviorHelper=function(a){return this._actionHelper({},a,a.behavior)},d._afterHelper=function(a,b){var c=b.after;return d.Util.beArray(c)?this._actionHelper(a,b,c):d._callbackHelper(a,b,c)},d._beforeHelper=function(a,b){var c=b.before;return d.Util.beArray(c)?this._actionHelper(a,b,c):d._callbackHelper(a,b,c)},d._actionHelper=function(a,b,c){var e,f=c||"";return d.Util.beArray(f)&&(e=d._callbackHelper(a,b,f[0]),e?f[0]=e:f=f.join(" ")),f},d._callbackHelper=function(a,b,c){var e=c||"",f=d._helperHelper(b);if(e&&!d.Util.isFunction(e)){var g=d._helperCollection,h=g[f];e=!(!h||!d.Util.isFunction(h[e]))&&h[e]}return e},d._helperHelper=function(a){return a.helper||d._helperDefaultIndex},d._notifierHelper=function(a){var c=[];b.notifierCollection;if(a)if(a.id&&b.EventSystem.isEventTarget(a.value))c.push(a.value),b.registerNotifier(a);else if(a.split){notifierIDList=a.split("$");var d,e=notifierIDList.length,f=1;for(f;f<e;f++)if((d=notifierIDList[f])&&" "!==d){d=d.trim();var g=b.getNotifier(d);g||(g=b.EventSystem.createEventTarget(),b.registerNotifier({id:d,value:g})),c.push(g)}}return c},d._paramsHelper=function(a){for(var b=[],c=a.length;c-- >1;)b[c-1]=a[c];return b},d._getParsedAniJSSentenceCollection=function(a){return d.Parser.parse(a)},d._findAniJSNodeCollection=function(a){return a.querySelectorAll("[data-anijs]")},d._animationEndPrefix=function(){return["animationend","oAnimationEnd","animationend","webkitAnimationEnd"][d._endPrefixBrowserDetectionIndex()]},d._transitionEndPrefix=function(){return["transitionend","oTransitionEnd","transitionend","webkitTransitionEnd"][d._endPrefixBrowserDetectionIndex()]},d._endPrefixBrowserDetectionIndex=function(){for(var a=document.createElement("fe"),b="Animation",c=["animation","O"+b,"Moz"+b,"webkit"+b],d=0;d<c.length;d++)if(void 0!==a.style[c[d]])return d},b.AnimationContext=function(a){var c=this;c.init=function(a){c.behaviorTargetList=a.behaviorTargetList||[],c.nodeHelper=a.nodeHelper,c.animationEndEvent=a.animationEndEvent,c.behavior=a.behavior,c.after=a.after,c.eventSystem=a.eventSystem,c.eventTarget=a.eventTarget,c.afterFunctionName=a.afterFunctionName,c.dataAniJSOwner=a.dataAniJSOwner,c.listener=a.listener,c.event=a.event,c.before=a.before},c.doDefaultAction=function(a,b){var e,f=c,g=f.nodeHelper,h=f.animationEndEvent,i=f.after,j=f.afterFunctionName;f.eventSystem.addEventListenerHelper(a,h,function(a){a.stopPropagation(),f.eventSystem.removeEventListenerHelper(a.target,a.type,arguments.callee),i&&(d.Util.isFunction(i)?i(a,c):d.Util.beArray(i)&&i[0](a,c,d._paramsHelper(i)))}),"holdAnimClass"!==j&&"$holdAnimClass"!==j&&(e=a._ajLastBehavior,e&&g.removeClass(a,e),a._ajLastBehavior=b),a.offsetWidth=a.offsetWidth,g.addClass(a,b)},c.doFunctionAction=function(a,b){var e=c,f=e.after,g={target:a};b[0](g,c,d._paramsHelper(b)),d.Util.isFunction(f)?f(g,c):d.Util.beArray(f)&&f[0](g,c,d._paramsHelper(f))},c.runAll=function(){var a,e,f=c,g=f.behaviorTargetList,h=g.length,i=(f.behavior,0),j=f.before,k=c.event;for(i;i<h;i++)e={behaviorTargetList:[g[i]],nodeHelper:c.nodeHelper,animationEndEvent:c.animationEndEvent,behavior:c.behavior,after:c.after,eventSystem:c.eventSystem,eventTarget:c.eventTarget,afterFunctionName:c.afterFunctionName,dataAniJSOwner:c.dataAniJSOwner,listener:c.listener,event:k},a=new b.AnimationContext(e),j?d.Util.isFunction(j)?j(k,a):d.Util.beArray(j)&&j[0](k,a,d._paramsHelper(j)):a.run()},c.run=function(){var a=c,b=a.behavior,e=a.behaviorTargetList[0];c.hasRunned=1,d.Util.beArray(b)?a.doFunctionAction(e,b):a.doDefaultAction(e,b)},c.init(a)},d.Parser={parse:function(a){return this.parseDeclaration(a)},parseDeclaration:function(a){var b,c,d=[];b=a.split(";");var e=b.length,f=0;for(f;f<e;f++)c=this.parseSentence(b[f]),d.push(c);return d},parseSentence:function(a){var b,c,d={};b=a.split(",");var e=b.length,f=0;for(f;f<e;f++)c=this.parseDefinition(b[f]),d[c.key]=c.value;return d},parseDefinition:function(a){var b,d,e,f={},g=["behavior","after","before","behaviorTarget"];if(b=a.split(":"),b.length>1){if(d=b[0].trim(),b.length>2?(e=b.slice(1),e=e.join(":"),e=e.trim()):e=b[1].trim(),f.value=e,"if"===d)d="event";else if("on"===d)d="eventTarget";else for(var h=c.length-1;h>=0;h--)d===c[h]&&(d=g[h],"after"!==d&&"before"!==d||"$"===e[0]||(e="$"+e),e=this.parseDoDefinition(e));f.key=d,f.value=e}return f},parseDoDefinition:function(a){var b=/^\$(\w+)\s*/g,c=b.exec(a),d="",e=1;if(null!==c){d=c[1],doDefinitionArray=a.split(c[0])[1],doDefinitionArray=null!==doDefinitionArray?doDefinitionArray.split("|"):[],a=[],a[0]=d;for(var f=0;f<doDefinitionArray.length;f++)""!==doDefinitionArray[f]&&(a[e++]=doDefinitionArray[f].trim());return a}return a}},d.NodeHelper={addClass:function(a,b){b instanceof Array||(b=b.split(" "));for(var c=0,d=b.length;c<d;++c)b[c]&&!new RegExp("(\\s+|^)"+b[c]+"(\\s+|$)").test(a.className)&&(a.className=""===a.className?b[c]:a.className.trim()+" "+b[c])},removeClass:function(a,b){b instanceof Array||(b=b.split(" "));for(var c=0,d=b.length;c<d;++c)a.className=a.className.replace(new RegExp("(\\s+|^)"+b[c]+"(\\s+|$)")," ").trim()},hasClass:function(a,b){return b&&new RegExp("(\\s+|^)"+b+"(\\s+|$)").test(a.className)}},d.Util={isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},beArray:function(a){return Array.isArray(a)}},b.EventSystem={eventCollection:{},eventIdCounter:0,isEventTarget:function(a){return a.addEventListener?1:0},createEventTarget:function(){return new b.EventTarget},addEventListenerHelper:function(a,b,c,d){a.addEventListener(b,c,!1)},removeEventListenerHelper:function(a,b,c){a&&a.removeEventListener(b,c)},purgeAll:function(){var a,b,c=this,d=c.eventCollection,e=Object.keys(d),f=e.length,g=0;for(g;g<f;g++)a=e[g],b=d[a],b&&b.handleCollection&&b.handleCollection.length>0&&c.purgeEventTarget(b.handleCollection[0].element),delete d[a]},purgeAllNodes:function(a){var b=a.querySelectorAll("*");size=b.length;for(var c=size-1;c>=0;c--)this.purgeEventTarget(b[c])},purgeEventTarget:function(a){var b,c=this,d=a._aniJSEventID;if(d){b=c.eventCollection[d].handleCollection;var e,f=b.length,g=0;for(g;g<f;g++)e=b[g],c.removeEventListenerHelper(a,e.eventType,e.listener);c.eventCollection[d]=a._aniJSEventID=null,delete c.eventCollection[d],delete a._aniJSEventID}},registerEventHandle:function(a,b,c){var d=this,e=a._aniJSEventID,f=d.eventCollection,g={eventType:b,listener:c,element:a};if(e)f[e].handleCollection.push(g);else{var h={handleCollection:[g]};f[++d.eventIdCounter]=h,a._aniJSEventID=d.eventIdCounter}}},b.EventTarget=function(){this._listeners={}},b.EventTarget.prototype={constructor:b.EventTarget,addEventListener:function(a,b,c){var d=this;void 0===d._listeners[a]&&(d._listeners[a]=[]),d._listeners[a].push(b)},dispatchEvent:function(a){var b=this;if("string"==typeof a&&(a={type:a}),a.target||(a.target=b),!a.type)throw new Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array)for(var c=b._listeners[a.type],d=0,e=c.length;d<e;d++)c[d].call(b,a)},removeEventListener:function(a,b){var c=this;if(c._listeners[a]instanceof Array)for(var d=c._listeners[a],e=0,f=d.length;e<f;e++)if(d[e]===b){d.splice(e,1);break}}},b}(c||{});return c.init(),c.run(),"function"==typeof define&&define.amd&&define("anijs",[],function(){return c}),void 0===b&&(a.AniJS=c),c});